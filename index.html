<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YouTube Pinyin Karaoke Generator</title>
  <!-- Tailwind CSS from CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Custom styles -->
  <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">
  <!-- Top toolbar - always visible, changes context -->
  <div class="sticky top-0 z-20 bg-white shadow-md">
    <!-- Error messages container - positioned above toolbar -->
    <div id="errorContainer" class="w-full"></div>
    
    <!-- Breadcrumb-style toolbar -->
    <div class="toolbar flex items-center h-12 px-2 border-b">
      <!-- Step indicators -->
      <div class="steps flex items-center text-xs text-gray-500 flex-shrink-0">
        <span id="stepVideo" class="step active">1. Video</span>
        <span class="mx-1">›</span>
        <span id="stepLyrics" class="step">2. Lyrics</span>
        <span class="mx-1">›</span>
        <span id="stepPlayer" class="step">3. Player</span>
      </div>
      
      <!-- Current time display -->
      <span id="currentTime" class="text-xs text-gray-500 ml-2 hidden">0:00</span>
      
      <!-- Flexible space -->
      <div class="flex-grow"></div>
      
      <!-- Timing adjustment controls (hidden initially) -->
      <div id="playbackControls" class="hidden">
        <button id="adjustEarlier" class="text-xs bg-gray-200 py-1 px-2 rounded">-0.5s</button>
        <button id="adjustLater" class="text-xs bg-gray-200 py-1 px-2 rounded ml-1">+0.5s</button>
      </div>
    </div>
    
    <!-- Context-specific toolbars - only one visible at a time -->
    <div id="videoToolbar" class="input-toolbar flex items-center p-2 border-b">
      <input type="text" id="youtubeUrl" class="flex-grow p-2 text-sm border rounded" placeholder="Enter YouTube URL...">
      <button id="loadVideo" class="bg-blue-500 text-white py-2 px-3 rounded text-sm ml-2">Load</button>
    </div>
    
    <div id="lyricsToolbar" class="input-toolbar flex items-center p-2 border-b hidden">
      <button id="backToVideo" class="bg-gray-200 text-gray-700 py-2 px-3 rounded text-sm">Back</button>
      <input type="text" id="artistSong" class="flex-grow p-2 text-sm border rounded mx-2" placeholder="Artist / Song name">
      <button id="searchLyrics" class="bg-green-500 text-white py-2 px-3 rounded text-sm">Search</button>
    </div>
    
    <div id="playerToolbar" class="input-toolbar flex items-center p-2 border-b hidden">
      <button id="backToLyrics" class="bg-gray-200 text-gray-700 py-2 px-3 rounded text-sm">Back</button>
      
      <!-- Tabs for lyrics/search -->
      <div class="flex ml-2">
        <button id="searchTab" class="py-1 px-2 text-xs font-medium text-gray-500 rounded">Results</button>
        <button id="lyricsTab" class="py-1 px-2 text-xs font-medium text-blue-500 bg-blue-50 rounded ml-1">Lyrics</button>
      </div>
    </div>
  </div>
  
  <!-- Main content area -->
  <div class="flex-grow flex flex-col overflow-hidden">
    <!-- YouTube video container -->
    <div id="videoContainer" class="bg-white w-full">
      <div id="player" class="w-full aspect-video bg-gray-200 flex items-center justify-center">
        <div class="text-center">
          <h1 class="text-xl font-bold text-gray-700">YouTube Pinyin Karaoke</h1>
          <p class="text-gray-500 text-sm">Enter a URL above to get started</p>
        </div>
      </div>
    </div>
    
    <!-- Content panels - only one visible at a time -->
    <div class="flex-grow overflow-hidden">
      <!-- Lyrics panel -->
      <div id="lyricsPanel" class="bg-white hidden h-full">
        <!-- Search results view -->
        <div id="searchResults" class="overflow-y-auto p-2 h-full">
          <!-- Search results will be populated here -->
        </div>
        
        <!-- Lyrics view (initially hidden) -->
        <div id="lyricsView" class="hidden overflow-y-auto p-2 h-full">
          <!-- Lyrics with pinyin will be displayed here -->
        </div>
      </div>
    </div>
  </div>

  <!-- Loading YouTube iFrame API -->
  <script src="https://www.youtube.com/iframe_api"></script>
  
  <!-- Utility functions -->
  <script src="utils.js"></script>
  
  <!-- Pinyin conversion script -->
  <script src="pinyin.js"></script>
  
  <!-- Main application script -->
  <script src="app.js"></script>
</body>
</html>